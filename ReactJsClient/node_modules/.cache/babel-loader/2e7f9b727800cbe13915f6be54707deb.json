{"ast":null,"code":"import _classCallCheck from\"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import RoomIcon from'@material-ui/icons/Room';import{Grid,Card,CardContent/*Divider*/}from'@material-ui/core';import{DateField,List,Edit,Create,Datagrid,NumberInput,TextField,EditButton,SimpleForm,TextInput,Filter,EmailField,FunctionField}from'react-admin';import Dataloader from\"../Etl/Dataloader\";import CustomersRdxManager from\"../Etl/CustomersRdxManager\";export var CustPage=/*#__PURE__*/function(_React$Component){_inherits(CustPage,_React$Component);var _super=_createSuper(CustPage);function CustPage(props){var _this;_classCallCheck(this,CustPage);_this=_super.call(this,props);_this.state={showlist:true};CustomersRdxManager.reduxStore.subscribe(function(){console.log(\"reduxStore updated!!\");_this.setState({showlist:false});_this.setState({showlist:true});});return _this;}_createClass(CustPage,[{key:\"render\",value:function render(){var props=this.props;return/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"column\",spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Dataloader,null)))),/*#__PURE__*/React.createElement(Grid,{item:true},this.state.showlist&&/*#__PURE__*/React.createElement(CustList,props)));}}]);return CustPage;}(React.Component);export var CustList=/*#__PURE__*/function(_React$Component2){_inherits(CustList,_React$Component2);var _super2=_createSuper(CustList);function CustList(){_classCallCheck(this,CustList);return _super2.apply(this,arguments);}_createClass(CustList,[{key:\"render\",// constructor(props) {\n//     super(props);        \n// }\nvalue:function render(){var props=this.props;return/*#__PURE__*/React.createElement(List,Object.assign({},props,{filters:/*#__PURE__*/React.createElement(CustFilter,null),sort:{field:\"id\",order:\"ASC\"}}),/*#__PURE__*/React.createElement(Datagrid,null,/*#__PURE__*/React.createElement(TextField,{source:\"id\"}),/*#__PURE__*/React.createElement(FunctionField,{label:\"Full Name\",sortBy:\"last_name\",render:function render(record){return\"\".concat(record.first_name,\" \").concat(record.last_name);}}),/*#__PURE__*/React.createElement(EmailField,{source:\"email\"}),/*#__PURE__*/React.createElement(TextField,{source:\"ip\"}),/*#__PURE__*/React.createElement(Location,{label:\"Location (link)\"}),/*#__PURE__*/React.createElement(DateField,{locales:\"en-US\",label:\"Since\",source:\"created_at\"}),/*#__PURE__*/React.createElement(FunctionField,{label:\"Last Edit\",sortBy:\"updated_at\",render:function render(record){return record.updated_at&&new Date(\"\".concat(record.updated_at.split(\" \")[0],\"T\").concat(record.updated_at.split(\" \")[1],\".167Z\")).toLocaleString();}}),/*#__PURE__*/React.createElement(EditButton,null)));}}]);return CustList;}(React.Component);var CustFilter=function CustFilter(props){return/*#__PURE__*/React.createElement(Filter,props,/*#__PURE__*/React.createElement(TextInput,{label:\"Search\",source:\"q\",alwaysOn:true}));};var Location=function Location(_ref){var record=_ref.record;//console.log(JSON.stringify(record));\nreturn record&&record.latitude&&record.longitude?/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:\"http://www.google.com/maps/place/\"+record.latitude+\",\"+record.longitude,style:{textDecoration:'none',color:'black',whiteSpace:'nowrap'}},/*#__PURE__*/React.createElement(RoomIcon,{style:{color:'red',verticalAlign:'middle'}}),\" (\"+record.latitude+\",\"+record.longitude+\")\"):'';};var CustTitle=function CustTitle(_ref2){var record=_ref2.record;return record&&record.first_name&&record.last_name?/*#__PURE__*/React.createElement(\"span\",null,\"Customer:\",\" \".concat(record.first_name,\" \").concat(record.last_name)):'';};export var CustEdit=function CustEdit(props){return/*#__PURE__*/React.createElement(Edit,Object.assign({title:/*#__PURE__*/React.createElement(CustTitle,null)},props),/*#__PURE__*/React.createElement(SimpleForm,null,/*#__PURE__*/React.createElement(TextInput,{disabled:true,source:\"id\"}),/*#__PURE__*/React.createElement(TextInput,{source:\"first_name\"}),/*#__PURE__*/React.createElement(TextInput,{source:\"last_name\"}),/*#__PURE__*/React.createElement(TextInput,{source:\"email\"}),/*#__PURE__*/React.createElement(TextInput,{source:\"ip\"}),/*#__PURE__*/React.createElement(NumberInput,{source:\"latitude\"}),/*#__PURE__*/React.createElement(NumberInput,{source:\"longitude\"})));};export var CustCreate=function CustCreate(props){return/*#__PURE__*/React.createElement(Create,props,/*#__PURE__*/React.createElement(SimpleForm,null,/*#__PURE__*/React.createElement(TextInput,{source:\"first_name\"}),/*#__PURE__*/React.createElement(TextInput,{source:\"last_name\"}),/*#__PURE__*/React.createElement(TextInput,{source:\"email\"}),/*#__PURE__*/React.createElement(TextInput,{source:\"ip\"}),/*#__PURE__*/React.createElement(NumberInput,{source:\"latitude\"}),/*#__PURE__*/React.createElement(NumberInput,{source:\"longitude\"})));};","map":{"version":3,"sources":["/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/src/CustomerView/Customers.js"],"names":["React","RoomIcon","Grid","Card","CardContent","DateField","List","Edit","Create","Datagrid","NumberInput","TextField","EditButton","SimpleForm","TextInput","Filter","EmailField","FunctionField","Dataloader","CustomersRdxManager","CustPage","props","state","showlist","reduxStore","subscribe","console","log","setState","Component","CustList","field","order","record","first_name","last_name","updated_at","Date","split","toLocaleString","CustFilter","Location","latitude","longitude","textDecoration","color","whiteSpace","verticalAlign","CustTitle","CustEdit","CustCreate"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport RoomIcon from '@material-ui/icons/Room';\r\n\r\nimport {\r\n    Grid,\r\n    Card,    \r\n    CardContent,\r\n    /*Divider*/\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    DateField,\r\n    List,\r\n    Edit,\r\n    Create,\r\n    Datagrid,\r\n    NumberInput,\r\n    TextField,\r\n    EditButton,\r\n    SimpleForm,\r\n    TextInput,\r\n    Filter,\r\n    EmailField,\r\n    FunctionField,\r\n} from 'react-admin';\r\n\r\nimport Dataloader from \"../Etl/Dataloader\";\r\n\r\nimport CustomersRdxManager from \"../Etl/CustomersRdxManager\"; \r\n\r\nexport class CustPage extends React.Component {\r\n\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = { showlist: true };\r\n\r\n      CustomersRdxManager\r\n            .reduxStore\r\n            .subscribe(\r\n              () => { \r\n                console.log(\"reduxStore updated!!\");\r\n                this.setState({showlist: false});\r\n                this.setState({showlist: true});\r\n              }\r\n            );\r\n    }\r\n\r\n    render() {\r\n      \r\n    const { props } = this;\r\n\r\n    return (\r\n      <Grid container direction=\"column\" spacing={2}>\r\n        <Grid item>\r\n          <Card>\r\n            <CardContent>\r\n              <Dataloader />\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item>\r\n          {\r\n            this.state.showlist \r\n            &&\r\n            <CustList {...props} />\r\n          }\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport class CustList extends React.Component {\r\n    \r\n    // constructor(props) {\r\n    //     super(props);        \r\n    // }\r\n\r\n    render() {\r\n        const {\r\n            props,\r\n        } = this;\r\n\r\n        return (\r\n          <List\r\n            {...props}\r\n            filters={<CustFilter />}\r\n            sort={{ field: \"id\", order: \"ASC\" }}\r\n          >\r\n            <Datagrid>\r\n              <TextField source=\"id\" />\r\n              <FunctionField\r\n                label=\"Full Name\"\r\n                sortBy=\"last_name\"\r\n                render={(record) => `${record.first_name} ${record.last_name}`}\r\n              />\r\n              <EmailField source=\"email\" />\r\n              <TextField source=\"ip\" />\r\n              <Location label=\"Location (link)\" />\r\n              <DateField locales=\"en-US\" label=\"Since\" source=\"created_at\" />\r\n              <FunctionField\r\n                label=\"Last Edit\"\r\n                sortBy=\"updated_at\"\r\n                render={(record) =>\r\n                  record.updated_at &&\r\n                  new Date(\r\n                    `${record.updated_at.split(\" \")[0]}T${\r\n                      record.updated_at.split(\" \")[1]\r\n                    }.167Z`\r\n                  ).toLocaleString()\r\n                }\r\n              />\r\n              <EditButton />\r\n            </Datagrid>\r\n          </List>\r\n        );\r\n    }\r\n}\r\n\r\nconst CustFilter = props => (\r\n    <Filter {...props}>\r\n        <TextInput label=\"Search\" source=\"q\" alwaysOn />\r\n    </Filter>\r\n);\r\n\r\nconst Location = ({ record }) => {\r\n    //console.log(JSON.stringify(record));\r\n    return (\r\n        record && record.latitude && record.longitude\r\n        ?\r\n            <a\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                href={\r\n                    \"http://www.google.com/maps/place/\"\r\n                    + record.latitude +\",\"+ record.longitude\r\n                }\r\n                style={{\r\n                    textDecoration: 'none',\r\n                    color:'black',\r\n                    whiteSpace:'nowrap'\r\n                }}\r\n            >\r\n                <RoomIcon style={{color:'red', verticalAlign: 'middle'}} />\r\n                {\" (\" + record.latitude +\",\"+ record.longitude + \")\" }\r\n            </a>\r\n        :\r\n            ''\r\n    );\r\n};\r\n\r\nconst CustTitle = ({ record }) => {\r\n    return (\r\n        record && record.first_name && record.last_name\r\n        ?\r\n        <span>\r\n            Customer:\r\n            { ` ${record.first_name} ${record.last_name}` }\r\n        </span>\r\n        :\r\n        ''\r\n    );\r\n};\r\n\r\nexport const CustEdit = (props) => (\r\n    <Edit title={<CustTitle />} {...props}>\r\n    <SimpleForm>\r\n        <TextInput disabled source=\"id\" />\r\n        <TextInput source=\"first_name\" />\r\n        <TextInput source=\"last_name\" />\r\n        <TextInput source=\"email\" />\r\n        <TextInput source=\"ip\" />\r\n        <NumberInput source=\"latitude\" />\r\n        <NumberInput source=\"longitude\" />\r\n    </SimpleForm>\r\n    </Edit>\r\n);\r\n\r\nexport const CustCreate = props => (\r\n    <Create {...props}>\r\n        <SimpleForm>\r\n            <TextInput source=\"first_name\" />\r\n            <TextInput source=\"last_name\" />\r\n            <TextInput source=\"email\" />\r\n            <TextInput source=\"ip\" />\r\n            <NumberInput source=\"latitude\" />\r\n            <NumberInput source=\"longitude\" />\r\n        </SimpleForm>\r\n    </Create>\r\n);\r\n\r\n"]},"metadata":{},"sourceType":"module"}