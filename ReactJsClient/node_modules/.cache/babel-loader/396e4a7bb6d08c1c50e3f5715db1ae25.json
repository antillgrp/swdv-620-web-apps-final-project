{"ast":null,"code":"import _classCallCheck from \"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _jsxFileName = \"/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/src/CustomerView/Customers.js\",\n    _this2 = this;\n\nimport React from 'react';\nimport RoomIcon from '@material-ui/icons/Room';\nimport { Grid, Card, CardContent\n/*Divider*/\n} from '@material-ui/core';\nimport { DateField, List, Edit, Create, Datagrid, NumberInput, TextField, EditButton, SimpleForm, TextInput, Filter, EmailField, FunctionField } from 'react-admin';\nimport Dataloader from \"../Etl/Dataloader\";\nimport CustomersRdxManager from \"../Etl/CustomersRdxManager\";\nexport var CustPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(CustPage, _React$Component);\n\n  var _super = _createSuper(CustPage);\n\n  function CustPage(props) {\n    var _this;\n\n    _classCallCheck(this, CustPage);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      showlist: true\n    };\n    CustomersRdxManager.reduxStore.subscribe(function () {\n      console.log(\"reduxStore updated!!\");\n\n      _this.setState({\n        showlist: false\n      });\n\n      _this.setState({\n        showlist: true\n      });\n    });\n    return _this;\n  }\n\n  _createClass(CustPage, [{\n    key: \"render\",\n    value: function render() {\n      var props = this.props;\n      return /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        spacing: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(CardContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Dataloader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }\n      })))), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }\n      }, this.state.showlist && /*#__PURE__*/React.createElement(CustList, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return CustPage;\n}(React.Component);\nexport var CustList = /*#__PURE__*/function (_React$Component2) {\n  _inherits(CustList, _React$Component2);\n\n  var _super2 = _createSuper(CustList);\n\n  function CustList() {\n    _classCallCheck(this, CustList);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(CustList, [{\n    key: \"render\",\n    // constructor(props) {\n    //     super(props);        \n    // }\n    value: function render() {\n      var props = this.props;\n      return /*#__PURE__*/React.createElement(List, Object.assign({}, props, {\n        filters: /*#__PURE__*/React.createElement(CustFilter, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 22\n          }\n        }),\n        sort: {\n          field: \"id\",\n          order: \"ASC\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Datagrid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        source: \"id\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(FunctionField, {\n        label: \"Full Name\",\n        sortBy: \"last_name\",\n        render: function render(record) {\n          return \"\".concat(record.first_name, \" \").concat(record.last_name);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(EmailField, {\n        source: \"email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(TextField, {\n        source: \"ip\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(Location, {\n        label: \"Location (link)\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(DateField, {\n        locales: \"en-US\",\n        label: \"Since\",\n        source: \"created_at\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(FunctionField, {\n        label: \"Last Edit\",\n        sortBy: \"updated_at\",\n        render: function render(record) {\n          return record.updated_at && new Date(\"\".concat(record.updated_at.split(\" \")[0], \"T\").concat(record.updated_at.split(\" \")[1], \".167Z\")).toLocaleString();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(EditButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }\n      })));\n    }\n  }]);\n\n  return CustList;\n}(React.Component);\n\nvar CustFilter = function CustFilter(props) {\n  return /*#__PURE__*/React.createElement(Filter, Object.assign({}, props, {\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    label: \"Search\",\n    source: \"q\",\n    alwaysOn: true,\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }));\n};\n\nvar Location = function Location(_ref) {\n  var record = _ref.record;\n  //console.log(JSON.stringify(record));\n  return record && record.latitude && record.longitude ? /*#__PURE__*/React.createElement(\"a\", {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: \"http://www.google.com/maps/place/\" + record.latitude + \",\" + record.longitude,\n    style: {\n      textDecoration: 'none',\n      color: 'black',\n      whiteSpace: 'nowrap'\n    },\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(RoomIcon, {\n    style: {\n      color: 'red',\n      verticalAlign: 'middle'\n    },\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }), \" (\" + record.latitude + \",\" + record.longitude + \")\") : '';\n};\n\nvar CustTitle = function CustTitle(_ref2) {\n  var record = _ref2.record;\n  return record && record.first_name && record.last_name ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, \"Customer:\", \" \".concat(record.first_name, \" \").concat(record.last_name)) : '';\n};\n\nexport var CustEdit = function CustEdit(props) {\n  return /*#__PURE__*/React.createElement(Edit, Object.assign({\n    title: /*#__PURE__*/React.createElement(CustTitle, {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 18\n      }\n    })\n  }, props, {\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(SimpleForm, {\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    disabled: true,\n    source: \"id\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    source: \"first_name\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    source: \"last_name\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    source: \"email\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    source: \"ip\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(NumberInput, {\n    source: \"latitude\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(NumberInput, {\n    source: \"longitude\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  })));\n};\nexport var CustCreate = function CustCreate(props) {\n  return /*#__PURE__*/React.createElement(Create, Object.assign({}, props, {\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(SimpleForm, {\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    source: \"first_name\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    source: \"last_name\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    source: \"email\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextInput, {\n    source: \"ip\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(NumberInput, {\n    source: \"latitude\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(NumberInput, {\n    source: \"longitude\",\n    __self: _this2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  })));\n};","map":{"version":3,"sources":["/home/vsonline/workspace/swdv-620-web-apps-final-project/ReactJsClient/src/CustomerView/Customers.js"],"names":["React","RoomIcon","Grid","Card","CardContent","DateField","List","Edit","Create","Datagrid","NumberInput","TextField","EditButton","SimpleForm","TextInput","Filter","EmailField","FunctionField","Dataloader","CustomersRdxManager","CustPage","props","state","showlist","reduxStore","subscribe","console","log","setState","Component","CustList","field","order","record","first_name","last_name","updated_at","Date","split","toLocaleString","CustFilter","Location","latitude","longitude","textDecoration","color","whiteSpace","verticalAlign","CustTitle","CustEdit","CustCreate"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport RoomIcon from '@material-ui/icons/Room';\r\n\r\nimport {\r\n    Grid,\r\n    Card,    \r\n    CardContent,\r\n    /*Divider*/\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    DateField,\r\n    List,\r\n    Edit,\r\n    Create,\r\n    Datagrid,\r\n    NumberInput,\r\n    TextField,\r\n    EditButton,\r\n    SimpleForm,\r\n    TextInput,\r\n    Filter,\r\n    EmailField,\r\n    FunctionField,\r\n} from 'react-admin';\r\n\r\nimport Dataloader from \"../Etl/Dataloader\";\r\n\r\nimport CustomersRdxManager from \"../Etl/CustomersRdxManager\"; \r\n\r\nexport class CustPage extends React.Component {\r\n\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = { showlist: true };\r\n\r\n      CustomersRdxManager\r\n            .reduxStore\r\n            .subscribe(\r\n              () => { \r\n                console.log(\"reduxStore updated!!\");\r\n                this.setState({showlist: false});\r\n                this.setState({showlist: true});\r\n              }\r\n            );\r\n    }\r\n\r\n    render() {\r\n      \r\n    const { props } = this;\r\n\r\n    return (\r\n      <Grid container direction=\"column\" spacing={2}>\r\n        <Grid item>\r\n          <Card>\r\n            <CardContent>\r\n              <Dataloader />\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item>\r\n          {\r\n            this.state.showlist \r\n            &&\r\n            <CustList {...props} />\r\n          }\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport class CustList extends React.Component {\r\n    \r\n    // constructor(props) {\r\n    //     super(props);        \r\n    // }\r\n\r\n    render() {\r\n        const {\r\n            props,\r\n        } = this;\r\n\r\n        return (\r\n          <List\r\n            {...props}\r\n            filters={<CustFilter />}\r\n            sort={{ field: \"id\", order: \"ASC\" }}\r\n          >\r\n            <Datagrid>\r\n              <TextField source=\"id\" />\r\n              <FunctionField\r\n                label=\"Full Name\"\r\n                sortBy=\"last_name\"\r\n                render={(record) => `${record.first_name} ${record.last_name}`}\r\n              />\r\n              <EmailField source=\"email\" />\r\n              <TextField source=\"ip\" />\r\n              <Location label=\"Location (link)\" />\r\n              <DateField locales=\"en-US\" label=\"Since\" source=\"created_at\" />\r\n              <FunctionField\r\n                label=\"Last Edit\"\r\n                sortBy=\"updated_at\"\r\n                render={(record) =>\r\n                  record.updated_at &&\r\n                  new Date(\r\n                    `${record.updated_at.split(\" \")[0]}T${\r\n                      record.updated_at.split(\" \")[1]\r\n                    }.167Z`\r\n                  ).toLocaleString()\r\n                }\r\n              />\r\n              <EditButton />\r\n            </Datagrid>\r\n          </List>\r\n        );\r\n    }\r\n}\r\n\r\nconst CustFilter = props => (\r\n    <Filter {...props}>\r\n        <TextInput label=\"Search\" source=\"q\" alwaysOn />\r\n    </Filter>\r\n);\r\n\r\nconst Location = ({ record }) => {\r\n    //console.log(JSON.stringify(record));\r\n    return (\r\n        record && record.latitude && record.longitude\r\n        ?\r\n            <a\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                href={\r\n                    \"http://www.google.com/maps/place/\"\r\n                    + record.latitude +\",\"+ record.longitude\r\n                }\r\n                style={{\r\n                    textDecoration: 'none',\r\n                    color:'black',\r\n                    whiteSpace:'nowrap'\r\n                }}\r\n            >\r\n                <RoomIcon style={{color:'red', verticalAlign: 'middle'}} />\r\n                {\" (\" + record.latitude +\",\"+ record.longitude + \")\" }\r\n            </a>\r\n        :\r\n            ''\r\n    );\r\n};\r\n\r\nconst CustTitle = ({ record }) => {\r\n    return (\r\n        record && record.first_name && record.last_name\r\n        ?\r\n        <span>\r\n            Customer:\r\n            { ` ${record.first_name} ${record.last_name}` }\r\n        </span>\r\n        :\r\n        ''\r\n    );\r\n};\r\n\r\nexport const CustEdit = (props) => (\r\n    <Edit title={<CustTitle />} {...props}>\r\n    <SimpleForm>\r\n        <TextInput disabled source=\"id\" />\r\n        <TextInput source=\"first_name\" />\r\n        <TextInput source=\"last_name\" />\r\n        <TextInput source=\"email\" />\r\n        <TextInput source=\"ip\" />\r\n        <NumberInput source=\"latitude\" />\r\n        <NumberInput source=\"longitude\" />\r\n    </SimpleForm>\r\n    </Edit>\r\n);\r\n\r\nexport const CustCreate = props => (\r\n    <Create {...props}>\r\n        <SimpleForm>\r\n            <TextInput source=\"first_name\" />\r\n            <TextInput source=\"last_name\" />\r\n            <TextInput source=\"email\" />\r\n            <TextInput source=\"ip\" />\r\n            <NumberInput source=\"latitude\" />\r\n            <NumberInput source=\"longitude\" />\r\n        </SimpleForm>\r\n    </Create>\r\n);\r\n\r\n"]},"metadata":{},"sourceType":"module"}