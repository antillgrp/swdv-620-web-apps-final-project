(this.webpackJsonptutorial=this.webpackJsonptutorial||[]).push([[0],{266:function(e,t,a){e.exports=a.p+"static/media/README.a0c4e880.md"},336:function(e,t,a){e.exports=a(564)},341:function(e,t,a){},564:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),i=(a(341),a(645)),c=a(644),s=a(308),u=a.n(s),d=a(60),m=a(50),f=a(86),p=a(85),g=a(618),E=a(622),h=a(621),_=a(265),b=a.n(_),v=a(266),S=a.n(v),O=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={showMarkDown:!0,markdownText:"# loading..."},fetch(S.a).then((function(e){return e.text()})).then((function(e){console.log(e),n.setState({showMarkDown:!1}),n.setState({showMarkDown:!0,markdownText:e})})),n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(h.a,{title:"Welcome to the administration"}),r.a.createElement(E.a,null,this.state.showMarkDown&&r.a.createElement(b.a,{source:this.state.markdownText})))}}]),a}(r.a.Component),y=a(290),w=a.n(y),C=a(623),j=a(646),A=a(647),D=a(635),k=a(636),T=a(658),F=a(637),R=a(638),x=a(653),M=a(654),P=a(650),U=a(648),N=a(642),I=a(655),L=a(19),J=a(310),W=a(169),B=a.n(W),z=a(89),V=a(30),H=new(function(){function e(){var t=this;Object(d.a)(this,e),this.reduxStore=Object(V.e)(e.customersReducer),this.AddNewCustomer=function(a){return t.reduxStore.dispatch(e.ActionAddNewCustomer(a))},this.UpdateCustomer=function(a){return t.reduxStore.dispatch(e.ActionUpdateCustomer(a))},this.DeleteCustomer=function(a){return t.reduxStore.dispatch(e.ActionDeleteCustomer(a))},this.StoreCleanup=function(){return t.reduxStore.dispatch(e.ActionStoreCleanup())},this.AddCustomerSet=function(a){return t.reduxStore.dispatch(e.ActionAddCustomerSet(a))},this.subscribe=function(e){return t.reduxStore.subscribe(e)},Object.freeze(this)}return Object(m.a)(e,null,[{key:"initialState",get:function(){var e=(new Date).toISOString();return e=e.split("T")[0]+" "+e.split("T")[1].split(".")[0],{customers:[],deletedCusts:[]}}},{key:"actionTypes",get:function(){return Object.freeze({ADD_NEW_CUSTOMER:"ADD_NEW_CUSTOMER",ADD_CUSTOMER_SET:"ADD_CUSTOMER_SET",UPDATE_CUSTOMER:"UPDATE_CUSTOMER",DELETE_CUSTOMER:"DELETE_CUSTOMER",CLEANUP:"CLEANUP"})}},{key:"customersReducer",get:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.initialState,a=arguments.length>1?arguments[1]:void 0,n=t.customers,r=t.deletedCusts,l=(new Date).toISOString();switch(l=l.split("T")[0]+" "+l.split("T")[1].split(".")[0],a.type){case e.actionTypes.ADD_NEW_CUSTOMER:var o=a.data.newCustInfo;return n.some((function(e){return e.email===o.email}))?t:Object(L.a)(Object(L.a)({},t),{},{customers:[].concat(Object(z.a)(n),[Object(L.a)(Object(L.a)({},o),{},{id:o.id&&n.findIndex((function(e){return+e.id===o.id}))<0?o.id:+n.reduce((function(e,t){return+e.id>+t.id?e:t})).id+1,created_at:l,updated_at:l})])});case e.actionTypes.UPDATE_CUSTOMER:var i=a.data.updCustInfo,c=n.findIndex((function(e){return+e.id===+i.id}));if(c<0)return t;for(var s in i)if(i[s]!==n[c][s])return Object(L.a)(Object(L.a)({},t),{},{customers:[].concat(Object(z.a)(n.slice(0,c)),[Object(L.a)(Object(L.a)(Object(L.a)({},n[c]),i),{},{updated_at:l})])});return t;case e.actionTypes.DELETE_CUSTOMER:var u=a.data.id,d=n.findIndex((function(e){return+e.id===+u}));return d<0?t:Object(L.a)(Object(L.a)({},t),{},{deletedCusts:[].concat(Object(z.a)(r),[Object(L.a)({},n[d])]),customers:[].concat(Object(z.a)(n.slice(0,d)),Object(z.a)(n.slice(d+1)))});case e.actionTypes.CLEANUP:return Object(L.a)({},e.initialState);case e.actionTypes.ADD_CUSTOMER_SET:var m=a.data.dataSetArr;return Object(L.a)(Object(L.a)({},e.initialState),{},{customers:Object(z.a)(m)});default:return t}}}},{key:"ActionAddNewCustomer",get:function(){return function(t){return{type:e.actionTypes.ADD_NEW_CUSTOMER,data:{newCustInfo:t}}}}},{key:"ActionUpdateCustomer",get:function(){return function(t){return{type:e.actionTypes.UPDATE_CUSTOMER,data:{updCustInfo:t}}}}},{key:"ActionDeleteCustomer",get:function(){return function(t){return{type:e.actionTypes.DELETE_CUSTOMER,data:{id:t}}}}},{key:"ActionStoreCleanup",get:function(){return function(){return{type:e.actionTypes.CLEANUP,data:{}}}}},{key:"ActionAddCustomerSet",get:function(){return function(t){return{type:e.actionTypes.ADD_CUSTOMER_SET,data:{dataSetArr:t}}}}}]),Object(m.a)(e,[{key:"state",get:function(){return this.reduxStore.getState()}}]),e}()),G=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onLoadClick=function(e){switch(e.preventDefault(),+r.state.dataSource){case 1:r.state.jsonDataFile?r.loadJsonFile():alert("Json data file not properly selected, pls try again.");break;case 2:r.state.csvDataFile&&r.state.csvMapFile?r.loadCSVFiles():alert("CSV Data or Map not properly selected, pls try again.");break;case 3:r.fetchFromAPI()}},r.refillCustRdxStore=function(e){console.log(e),H.AddCustomerSet(e),r.props.history&&r.props.history.push("/customers"),console.log(H.state)},r.loadJsonFile=function(){var e=new FileReader;e.onabort=function(){return console.log("JsonFile reading was aborted")},e.onerror=function(){return console.log("JsonFile reading has failed")},e.onload=function(){var t=JSON.parse(e.result);t=Array.isArray(t)?Array.from(t):[],console.log(" from JSON:"),console.log(t),r.refillCustRdxStore(t)},e.readAsBinaryString(r.state.jsonDataFile)},r.loadCSVFiles=function(){var e=a(426),t=new FileReader;t.onabort=function(){return console.log("CsvFile reading was aborted")},t.onerror=function(){return console.log("CsvFile reading has failed")},t.onload=function(){e().fromString(t.result).then((function(a){var n=Object(J.a)(a,1)[0];t.onload=function(){e().fromString(t.result).then((function(e){e=e.map((function(e,t){var a={id:t+1,updated_at:null};for(var r in n)a[r]=e[n[r]];return a})),console.log("from CSV:"),console.log(e),r.refillCustRdxStore(e)}))},t.readAsBinaryString(r.state.csvDataFile)}))},t.readAsBinaryString(r.state.csvMapFile)},r.fetchFromAPI=function(){var e=r.state.restApiArr[r.state.restApiIdx].split("[")[1].split("]")[0].concat("/customers");fetch(e).then((function(t){return t.ok?t.json():(alert("ERROR Fetching from: "+e),[])})).then((function(e){return r.refillCustRdxStore(e)})).catch((function(e){return console.error(e)}))},r.state={dataSource:0,jsonDataFile:null,csvDataFile:null,csvMapFile:null,restApiIdx:0,restApiArr:["(SPRINGB) ["+window.location.protocol+"//"+window.location.hostname+":4001]","(EXPRESS) ["+window.location.protocol+"//"+window.location.hostname+":4002]"]},r}return Object(m.a)(n,[{key:"render",value:function(){var e,t,a=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("fieldset",{style:{border:"2px solid black"}},r.a.createElement("legend",{style:Object(L.a)({border:"2px solid black",padding:"0 2vmin 0 2vmin"},(e=14,t=5,{fontSize:"calc(".concat(e,"px + ").concat(t,"vmin)")}))},"Data loader"),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("label",null,r.a.createElement("br",null),r.a.createElement("strong",null,"Select the source of the data:"),r.a.createElement("br",null),r.a.createElement("select",{value:this.state.dataSource,onChange:function(e){return a.setState({dataSource:e.target.value})}},["","json file","csv map/data files","REST-API (database)"].map((function(e,t){return r.a.createElement("option",{value:t},e)})))),r.a.createElement("br",null),r.a.createElement("br",null),1===+this.state.dataSource?r.a.createElement(B.a,{fileTypes:[".json"],handleFiles:function(e){a.setState({jsonDataFile:e.length>0?e[0]:null})}},r.a.createElement("label",null,r.a.createElement("strong",null,"Select ",r.a.createElement("span",{style:{color:"orange"}},"JSON")," file:"," "),r.a.createElement("strong",{style:{color:"green"}},this.state.jsonDataFile&&this.state.jsonDataFile.name),r.a.createElement("br",null),r.a.createElement("button",null,"Open"))):2===+this.state.dataSource?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{fileTypes:[".csv"],handleFiles:function(e){a.setState({csvDataFile:e.length>0?e[0]:null})}},r.a.createElement("label",null,r.a.createElement("strong",null,"Select ",r.a.createElement("span",{style:{color:"orange"}},"CSV")," ("," ",r.a.createElement("span",{style:{color:"red"}},"Data")," ) file:"," "),r.a.createElement("strong",{style:{color:"green"}},this.state.csvDataFile&&this.state.csvDataFile.name),r.a.createElement("br",null),r.a.createElement("button",null,"Open Data File"))),r.a.createElement("br",null),r.a.createElement(B.a,{fileTypes:[".csv"],handleFiles:function(e){a.setState({csvMapFile:e.length>0?e[0]:null})}},r.a.createElement("label",null,r.a.createElement("strong",null,"Select ",r.a.createElement("span",{style:{color:"orange"}},"CSV")," ("," ",r.a.createElement("span",{style:{color:"red"}},"Map")," ) file:"," "),r.a.createElement("strong",{style:{color:"green"}},this.state.csvMapFile&&this.state.csvMapFile.name),r.a.createElement("br",null),r.a.createElement("button",null,"Open Map File")))):3===+this.state.dataSource?r.a.createElement("label",null,r.a.createElement("strong",null,"Select the Rest API for fetching the data:"),r.a.createElement("br",null),r.a.createElement("select",{value:this.state.restApiIdx,onChange:function(e){return a.setState({restApiIdx:e.target.value})}},this.state.restApiArr.map((function(e,t){return r.a.createElement("option",{value:t},e)}))),r.a.createElement("br",null)):null,r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Load...",onClick:this.onLoadClick})))))}}]),n}(n.Component),q=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={showlist:!0},H.reduxStore.subscribe((function(){console.log("reduxStore updated!!"),n.setState({showlist:!1}),n.setState({showlist:!0})})),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props;return r.a.createElement(C.a,{container:!0,direction:"column",spacing:2},r.a.createElement(C.a,{item:!0},r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(G,null)))),r.a.createElement(C.a,{item:!0},this.state.showlist&&r.a.createElement(Q,e)))}}]),a}(r.a.Component),Q=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props;return r.a.createElement(j.a,Object.assign({},e,{filters:r.a.createElement(X,null),sort:{field:"id",order:"ASC"}}),r.a.createElement(A.a,null,r.a.createElement(D.a,{source:"id"}),r.a.createElement(k.a,{label:"Full Name",sortBy:"last_name",render:function(e){return"".concat(e.first_name," ").concat(e.last_name)}}),r.a.createElement(T.a,{source:"email"}),r.a.createElement(D.a,{source:"ip"}),r.a.createElement(Z,{label:"Location (link)"}),r.a.createElement(F.a,{locales:"en-US",label:"Since",source:"created_at"}),r.a.createElement(k.a,{label:"Last Edit",sortBy:"updated_at",render:function(e){return e.updated_at&&new Date("".concat(e.updated_at.split(" ")[0],"T").concat(e.updated_at.split(" ")[1],".167Z")).toLocaleString()}}),r.a.createElement(R.a,null)))}}]),a}(r.a.Component),X=function(e){return r.a.createElement(x.a,e,r.a.createElement(M.a,{label:"Search",source:"q",alwaysOn:!0}))},Z=function(e){var t=e.record;return t&&t.latitude&&t.longitude?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.google.com/maps/place/"+t.latitude+","+t.longitude,style:{textDecoration:"none",color:"black",whiteSpace:"nowrap"}},r.a.createElement(w.a,{style:{color:"red",verticalAlign:"middle"}})," ("+t.latitude+","+t.longitude+")"):""},$=function(e){var t=e.record;return t&&t.first_name&&t.last_name?r.a.createElement("span",null,"Customer:"," ".concat(t.first_name," ").concat(t.last_name)):""},K=function(e){return r.a.createElement(P.a,Object.assign({title:r.a.createElement($,null)},e),r.a.createElement(U.a,null,r.a.createElement(M.a,{disabled:!0,source:"id"}),r.a.createElement(M.a,{source:"first_name"}),r.a.createElement(M.a,{source:"last_name"}),r.a.createElement(M.a,{source:"email"}),r.a.createElement(M.a,{source:"ip"}),r.a.createElement(N.a,{source:"latitude"}),r.a.createElement(N.a,{source:"longitude"})))},Y=function(e){return r.a.createElement(I.a,e,r.a.createElement(U.a,null,r.a.createElement(M.a,{source:"first_name"}),r.a.createElement(M.a,{source:"last_name"}),r.a.createElement(M.a,{source:"email"}),r.a.createElement(M.a,{source:"ip"}),r.a.createElement(N.a,{source:"latitude"}),r.a.createElement(N.a,{source:"longitude"})))},ee=a(294),te=a.n(ee),ae=a(55);function ne(e,t,a,n){console.group?(console.groupCollapsed(e,t,JSON.stringify(a)),console.log(n),console.groupEnd()):(console.log("FakeRest request ",e,t,a),console.log("FakeRest response",n))}var re=new(function(){function e(){Object(d.a)(this,e),this.dataProvider=null,this.loadDataProvider({})}return Object(m.a)(e,[{key:"loadDataProvider",value:function(e){this.dataProvider=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function a(e){var t=new te.a.Server;return t.init(e),t}H.StoreCleanup(),H.AddCustomerSet(e.customers&&Array.isArray(e.customers)?e.customers:[]);var n=null;function r(){n=a(H.state)}function l(e){H.AddNewCustomer(e),console.log(e),console.log(H.state)}function o(e){H.UpdateCustomer(e),console.log(H.state)}function i(e){H.DeleteCustomer(e),console.log(H.state)}function c(e,t,a){switch(e){case ae.d:var r=a.pagination,c=r.page,s=r.perPage,u=a.sort,d={sort:[u.field,u.order],range:[(c-1)*s,c*s-1],filter:a.filter};return{data:n.getAll(t,d),total:n.getCount(t,{filter:a.filter})};case ae.g:return{data:n.getOne(t,a.id,Object(L.a)({},a))};case ae.e:return{data:n.getAll(t,{filter:{id:a.ids}})};case ae.f:var m=a.pagination,f=m.page,p=m.perPage,g=a.sort,E={sort:[g.field,g.order],range:[(f-1)*p,f*p-1],filter:Object(L.a)(Object(L.a)({},a.filter),{},{[a.target]:a.id})};return{data:n.getAll(t,E),total:n.getCount(t,{filter:E.filter})};case ae.a:var h={data:n.addOne(t,Object(L.a)({},a.data))};return l(Object(L.a)({},h.data)),h;case ae.h:var _={data:n.updateOne(t,a.id,Object(L.a)({},a.data))};return o(Object(L.a)({},_.data)),_;case ae.i:var b={data:a.ids};return a.ids.forEach((function(e){o(Object(L.a)({},n.updateOne(t,e,Object(L.a)({},a.data))))})),b;case ae.b:var v={data:n.removeOne(t,a.id)};return i(v.data.id),v;case ae.c:var S={data:a.ids};return a.ids.forEach((function(e){n.removeOne(t,e),i(e)})),S;default:return!1}}return r(),H.subscribe(r),function(e,a,r){var l;if(!n.getCollection(a))return new Promise((function(e,t){return t(new Error('Undefined collection "'.concat(a,'"')))}));try{l=c(e,a,r)}catch(o){return new Promise((function(e,t){return t(o)}))}return!1===l?new Promise((function(t,a){return a(new Error("Unsupported fetch action type ".concat(e)))})):(t&&ne(e,a,r,l),new Promise((function(e){return e(l)})))}}(e,!1)}}]),e}());re.loadDataProvider({customers:[{id:1,email:"jhamilton0@usda.gov",first_name:"Hard Coded",last_name:"Data",ip:"135.75.95.238",latitude:-27.634171,longitude:-52.273891,created_at:"2015-01-21 03:20:11",updated_at:null},{id:2,email:"anichols1@addtoany.com",first_name:"Anthony",last_name:"Nichols",ip:"147.3.15.197",latitude:56.47633,longitude:53.797821,created_at:"2015-01-16 00:10:27",updated_at:null},{id:3,email:"lmurphy2@sina.com.cn",first_name:"Lawrence",last_name:"Murphy",ip:"70.210.188.75",latitude:16.58333,longitude:121.5,created_at:"2015-01-20 20:19:37",updated_at:null},{id:4,email:"sburke3@lycos.com",first_name:"Scott",last_name:"Burke",ip:"104.203.83.37",latitude:37.692478,longitude:120.971481,created_at:"2015-01-01 13:43:44",updated_at:null},{id:5,email:"hjackson4@nsw.gov.au",first_name:"Howard",last_name:"Jackson",ip:"59.197.227.237",latitude:37.578499,longitude:26.48069,created_at:"2015-01-27 13:43:37",updated_at:null},{id:6,email:"hcastillo5@youtu.be",first_name:"Harold",last_name:"Castillo",ip:"169.236.141.105",latitude:25.2407,longitude:115.7444,created_at:"2015-01-07 19:26:28",updated_at:null},{id:7,email:"tfuller6@360.cn",first_name:"Tammy",last_name:"Fuller",ip:"114.34.134.46",latitude:57.00993,longitude:61.45776,created_at:"2015-01-23 18:34:38",updated_at:null},{id:8,email:"eperez7@google.co.jp",first_name:"Emily",last_name:"Perez",ip:"183.236.227.181",latitude:29.51889,longitude:112.54837,created_at:"2015-01-07 08:52:38",updated_at:null},{id:9,email:"vwells8@ning.com",first_name:"Virginia",last_name:"Wells",ip:"136.128.49.18",latitude:-23.193609,longitude:-49.383888,created_at:"2015-01-13 22:14:28",updated_at:null},{id:10,email:"mpayne9@geocities.jp",first_name:"Marilyn",last_name:"Payne",ip:"200.252.227.193",latitude:15.38989,longitude:104.550827,created_at:"2015-01-05 08:36:52",updated_at:null},{id:11,email:"shicksa@goodreads.com",first_name:"Sara",last_name:"Hicks",ip:"206.68.211.203",latitude:22.835991,longitude:114.804871,created_at:"2015-01-05 16:41:16",updated_at:null},{id:12,email:"rgordonb@surveymonkey.com",first_name:"Ruby",last_name:"Gordon",ip:"125.219.84.66",latitude:-8.104,longitude:113.419998,created_at:"2015-01-02 02:22:44",updated_at:null},{id:13,email:"jpaynec@loc.gov",first_name:"Johnny",last_name:"Payne",ip:"207.164.155.110",latitude:-8.88202,longitude:-36.502159,created_at:"2015-01-29 16:49:38",updated_at:null},{id:14,email:"jedwardsd@parallels.com",first_name:"Joe",last_name:"Edwards",ip:"20.32.63.226",latitude:32.977711,longitude:98.097954,created_at:"2015-01-20 06:51:13",updated_at:null},{id:15,email:"pwilsone@hud.gov",first_name:"Peter",last_name:"Wilson",ip:"28.212.184.49",latitude:37.6917,longitude:-8.2167,created_at:"2015-01-20 20:36:27",updated_at:null},{id:16,email:"jwatsonf@ocn.ne.jp",first_name:"Juan",last_name:"Watson",ip:"130.51.21.38",latitude:11.74697,longitude:11.96083,created_at:"2015-01-11 00:57:25",updated_at:null},{id:17,email:"bburkeg@utexas.edu",first_name:"Brenda",last_name:"Burke",ip:"115.107.50.25",latitude:48.719391,longitude:44.501839,created_at:"2015-01-09 01:46:07",updated_at:null},{id:18,email:"vfernandezh@dagondesign.com",first_name:"Victor",last_name:"Fernandez",ip:"131.66.212.201",latitude:-8.3111,longitude:112.142899,created_at:"2015-01-09 13:09:57",updated_at:null},{id:19,email:"jortizi@opensource.org",first_name:"Jeffrey",last_name:"Ortiz",ip:"218.176.0.251",latitude:45.868698,longitude:5.9365,created_at:"2015-01-16 14:44:51",updated_at:null},{id:20,email:"gclarkj@hc360.com",first_name:"Gloria",last_name:"Clark",ip:"195.207.249.82",latitude:-10.71484,longitude:25.46674,created_at:"2015-01-16 16:32:29",updated_at:null}]});var le=function(){return r.a.createElement(i.a,{title:"People10 code challenge",dataProvider:re.dataProvider,dashboard:O},r.a.createElement(c.a,{icon:u.a,name:"customers",options:{label:"Customers List"},list:q,edit:K,create:Y}))},oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(le,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");oe?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ie(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ie(e)}))}}()}},[[336,1,2]]]);
//# sourceMappingURL=main.1b495448.chunk.js.map